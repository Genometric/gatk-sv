name: Test Action

on:
  push:
    branches:
      - main
      - VJalili-patch-31
    paths:
      - 'src/**'
      - 'dockerfiles/**'
      - 'scripts/docker/build_docker.py'
      - '.github/workflows/test_action.yml'
  pull_request:
    branches:
      - main
      - VJalili-patch-31
    paths:
      - 'src/**'
      - 'dockerfiles/**'
      - 'scripts/docker/build_docker.py'
      - '.github/workflows/test_action.yml'

permissions:
  id-token: write
  contents: read

jobs:
  build_args_job:
    runs-on: ubuntu-latest
    environment: Testsb
    name: TEST RUN
    env:
      GITHUB_CONTEXT: ${{ toJson(github) }}
    steps:
      - name: 'Az CLI login'
        uses: azure/login@v2
        with:
            client-id: ${{ secrets.AZURE_CLIENT_ID }}
            tenant-id: ${{ secrets.AZURE_TENANT_ID }}
            subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
      - name: Hello world action step
        id: hello
        uses: Genometric/hello-world-javascript-action@v1.20
        with:
          who-to-greet: 'Mona the Octocat'
          azure-storage-account-name: 'cromwell7379410456f0'
          azure-storage-container-name: 'workflows'
      # Use the output from the `hello` step
      - name: Get the output time
        run: echo "The time was ${{ steps.hello.outputs.time }}"
